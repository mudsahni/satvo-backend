basePath: /api/v1
definitions:
  domain.Collection:
    properties:
      created_at:
        type: string
      created_by:
        type: string
      description:
        type: string
      id:
        type: string
      name:
        type: string
      tenant_id:
        type: string
      updated_at:
        type: string
    type: object
  domain.CollectionPermission:
    enum:
    - owner
    - editor
    - viewer
    type: string
    x-enum-varnames:
    - CollectionPermOwner
    - CollectionPermEditor
    - CollectionPermViewer
  domain.CollectionPermissionEntry:
    properties:
      collection_id:
        type: string
      created_at:
        type: string
      granted_by:
        type: string
      id:
        type: string
      permission:
        $ref: '#/definitions/domain.CollectionPermission'
      tenant_id:
        type: string
      user_id:
        type: string
    type: object
  domain.Document:
    properties:
      collection_id:
        type: string
      confidence_scores:
        type: object
      created_at:
        type: string
      created_by:
        type: string
      document_type:
        type: string
      field_provenance:
        type: object
      file_id:
        type: string
      id:
        type: string
      name:
        type: string
      parse_mode:
        $ref: '#/definitions/domain.ParseMode'
      parsed_at:
        type: string
      parser_model:
        type: string
      parser_prompt:
        type: string
      parsing_error:
        type: string
      parsing_status:
        $ref: '#/definitions/domain.ParsingStatus'
      reconciliation_status:
        $ref: '#/definitions/domain.ReconciliationStatus'
      review_status:
        $ref: '#/definitions/domain.ReviewStatus'
      reviewed_at:
        type: string
      reviewed_by:
        type: string
      reviewer_notes:
        type: string
      structured_data:
        type: object
      tenant_id:
        type: string
      updated_at:
        type: string
      validation_results:
        type: object
      validation_status:
        $ref: '#/definitions/domain.ValidationStatus'
    type: object
  domain.DocumentTag:
    properties:
      created_at:
        type: string
      document_id:
        type: string
      id:
        type: string
      key:
        type: string
      source:
        type: string
      tenant_id:
        type: string
      value:
        type: string
    type: object
  domain.FileMeta:
    properties:
      content_type:
        type: string
      created_at:
        type: string
      file_name:
        type: string
      file_size:
        type: integer
      file_type:
        $ref: '#/definitions/domain.FileType'
      id:
        type: string
      original_name:
        type: string
      s3_bucket:
        type: string
      s3_key:
        type: string
      status:
        $ref: '#/definitions/domain.FileStatus'
      tenant_id:
        type: string
      updated_at:
        type: string
      uploaded_by:
        type: string
    type: object
  domain.FileStatus:
    enum:
    - pending
    - uploaded
    - failed
    - deleted
    type: string
    x-enum-varnames:
    - FileStatusPending
    - FileStatusUploaded
    - FileStatusFailed
    - FileStatusDeleted
  domain.FileType:
    enum:
    - pdf
    - jpg
    - png
    type: string
    x-enum-varnames:
    - FileTypePDF
    - FileTypeJPG
    - FileTypePNG
  domain.ParseMode:
    enum:
    - single
    - dual
    type: string
    x-enum-varnames:
    - ParseModeSingle
    - ParseModeDual
  domain.ParsingStatus:
    enum:
    - pending
    - processing
    - completed
    - failed
    type: string
    x-enum-varnames:
    - ParsingStatusPending
    - ParsingStatusProcessing
    - ParsingStatusCompleted
    - ParsingStatusFailed
  domain.ReconciliationStatus:
    enum:
    - pending
    - valid
    - invalid
    - warning
    type: string
    x-enum-varnames:
    - ReconciliationStatusPending
    - ReconciliationStatusValid
    - ReconciliationStatusInvalid
    - ReconciliationStatusWarning
  domain.ReviewStatus:
    enum:
    - pending
    - approved
    - rejected
    type: string
    x-enum-varnames:
    - ReviewStatusPending
    - ReviewStatusApproved
    - ReviewStatusRejected
  domain.Tenant:
    properties:
      created_at:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      name:
        type: string
      slug:
        type: string
      updated_at:
        type: string
    type: object
  domain.User:
    properties:
      created_at:
        type: string
      email:
        type: string
      full_name:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      role:
        $ref: '#/definitions/domain.UserRole'
      tenant_id:
        type: string
      updated_at:
        type: string
    type: object
  domain.UserRole:
    enum:
    - admin
    - manager
    - member
    - viewer
    type: string
    x-enum-varnames:
    - RoleAdmin
    - RoleManager
    - RoleMember
    - RoleViewer
  domain.ValidationStatus:
    enum:
    - pending
    - valid
    - invalid
    - warning
    type: string
    x-enum-varnames:
    - ValidationStatusPending
    - ValidationStatusValid
    - ValidationStatusInvalid
    - ValidationStatusWarning
  handler.APIError:
    properties:
      code:
        type: string
      message:
        type: string
    type: object
  handler.AddTagsRequest:
    properties:
      tags:
        additionalProperties:
          type: string
        example:
          cost_center: CC-1234
          department: Engineering
        type: object
    required:
    - tags
    type: object
  handler.BatchUploadResult:
    properties:
      error:
        example: unsupported file type
        type: string
      file:
        $ref: '#/definitions/domain.FileMeta'
      success:
        example: true
        type: boolean
    type: object
  handler.CollectionWithFiles:
    properties:
      collection:
        $ref: '#/definitions/domain.Collection'
      files:
        items:
          $ref: '#/definitions/domain.FileMeta'
        type: array
      files_meta:
        $ref: '#/definitions/handler.PagMeta'
    type: object
  handler.CreateCollectionRequest:
    properties:
      description:
        example: Invoices from Q4 2024 fiscal quarter
        type: string
      name:
        example: Q4 2024 Invoices
        type: string
    required:
    - name
    type: object
  handler.CreateDocumentRequest:
    properties:
      collection_id:
        example: 660e8400-e29b-41d4-a716-446655440001
        type: string
      document_type:
        example: invoice
        type: string
      file_id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      name:
        example: Acme Corp Invoice Q4-2024
        type: string
      parse_mode:
        allOf:
        - $ref: '#/definitions/domain.ParseMode'
        example: single
      tags:
        additionalProperties:
          type: string
        example:
          quarter: Q4
          vendor: Acme Corp
        type: object
    required:
    - collection_id
    - document_type
    - file_id
    type: object
  handler.CreateTenantRequest:
    properties:
      name:
        example: Acme Corporation
        type: string
      slug:
        example: acme
        type: string
    required:
    - name
    - slug
    type: object
  handler.CreateUserRequest:
    properties:
      email:
        example: jane.doe@acme.com
        type: string
      full_name:
        example: Jane Doe
        type: string
      password:
        example: securepassword123
        type: string
      role:
        allOf:
        - $ref: '#/definitions/domain.UserRole'
        example: member
    required:
    - email
    - password
    - role
    type: object
  handler.EditStructuredDataRequest:
    properties:
      structured_data:
        $ref: '#/definitions/handler.GSTInvoice'
    required:
    - structured_data
    type: object
  handler.ErrorResponseBody:
    properties:
      error:
        $ref: '#/definitions/handler.APIError'
      success:
        example: false
        type: boolean
    type: object
  handler.FieldStatus:
    properties:
      messages:
        items:
          type: string
        type: array
      status:
        example: valid
        type: string
    type: object
  handler.FileWithDownloadURL:
    properties:
      download_url:
        example: https://s3.amazonaws.com/satvos-uploads/...?X-Amz-Signature=...
        type: string
      file:
        $ref: '#/definitions/domain.FileMeta'
    type: object
  handler.GSTInvoice:
    properties:
      buyer:
        $ref: '#/definitions/handler.Party'
      invoice:
        $ref: '#/definitions/handler.InvoiceHeader'
      line_items:
        items:
          $ref: '#/definitions/handler.LineItem'
        type: array
      notes:
        example: Thank you for your business
        type: string
      payment:
        $ref: '#/definitions/handler.Payment'
      seller:
        $ref: '#/definitions/handler.Party'
      totals:
        $ref: '#/definitions/handler.Totals'
    type: object
  handler.HealthResponse:
    properties:
      error:
        example: database not reachable
        type: string
      status:
        example: ok
        type: string
    type: object
  handler.InvoiceHeader:
    properties:
      currency:
        example: INR
        type: string
      due_date:
        example: "2025-01-15"
        type: string
      invoice_date:
        example: "2024-12-15"
        type: string
      invoice_number:
        example: INV-2024-001234
        type: string
      invoice_type:
        example: tax_invoice
        type: string
      place_of_supply:
        example: Karnataka
        type: string
      reverse_charge:
        example: false
        type: boolean
    type: object
  handler.LineItem:
    properties:
      cgst_amount:
        example: 22050
        type: number
      cgst_rate:
        example: 9
        type: number
      description:
        example: Software Development Services
        type: string
      discount:
        example: 5000
        type: number
      hsn_sac_code:
        example: "998314"
        type: string
      igst_amount:
        example: 0
        type: number
      igst_rate:
        example: 0
        type: number
      quantity:
        example: 100
        type: number
      sgst_amount:
        example: 22050
        type: number
      sgst_rate:
        example: 9
        type: number
      taxable_amount:
        example: 245000
        type: number
      total:
        example: 289100
        type: number
      unit:
        example: hours
        type: string
      unit_price:
        example: 2500
        type: number
    type: object
  handler.LoginRequest:
    properties:
      email:
        example: admin@acme.com
        type: string
      password:
        example: securepassword123
        type: string
      tenant_slug:
        example: acme
        type: string
    required:
    - email
    - password
    - tenant_slug
    type: object
  handler.MessageResponse:
    properties:
      message:
        example: operation completed successfully
        type: string
    type: object
  handler.PagMeta:
    properties:
      limit:
        type: integer
      offset:
        type: integer
      total:
        type: integer
    type: object
  handler.Party:
    properties:
      address:
        example: 123 Tech Park, Bangalore
        type: string
      gstin:
        example: 29AABCU9603R1ZM
        type: string
      name:
        example: Acme Corporation Pvt Ltd
        type: string
      pan:
        example: AABCU9603R
        type: string
      state:
        example: Karnataka
        type: string
      state_code:
        example: "29"
        type: string
    type: object
  handler.Payment:
    properties:
      account_number:
        example: "50100123456789"
        type: string
      bank_name:
        example: HDFC Bank
        type: string
      ifsc_code:
        example: HDFC0001234
        type: string
      payment_terms:
        example: Net 30
        type: string
    type: object
  handler.RefreshRequest:
    properties:
      refresh_token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
    required:
    - refresh_token
    type: object
  handler.Response:
    properties:
      data: {}
      meta:
        $ref: '#/definitions/handler.PagMeta'
      success:
        example: true
        type: boolean
    type: object
  handler.ReviewDocumentRequest:
    properties:
      notes:
        example: Verified against source PDF. All data correct.
        type: string
      status:
        example: approved
        type: string
    required:
    - status
    type: object
  handler.SetPermissionRequest:
    properties:
      permission:
        allOf:
        - $ref: '#/definitions/domain.CollectionPermission'
        example: editor
      user_id:
        example: 987fcdeb-51a2-3bc4-d567-890123456789
        type: string
    required:
    - permission
    - user_id
    type: object
  handler.TokenResponse:
    properties:
      access_token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
      expires_at:
        example: "2025-01-15T10:30:00Z"
        type: string
      refresh_token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
    type: object
  handler.Totals:
    properties:
      amount_in_words:
        example: Two Lakh Eighty Nine Thousand One Hundred Rupees Only
        type: string
      cess:
        example: 0
        type: number
      cgst:
        example: 22050
        type: number
      igst:
        example: 0
        type: number
      round_off:
        example: 0
        type: number
      sgst:
        example: 22050
        type: number
      subtotal:
        example: 250000
        type: number
      taxable_amount:
        example: 245000
        type: number
      total:
        example: 289100
        type: number
      total_discount:
        example: 5000
        type: number
    type: object
  handler.UpdateCollectionRequest:
    properties:
      description:
        example: Updated description
        type: string
      name:
        example: Q4 2024 Invoices - Final
        type: string
    required:
    - name
    type: object
  handler.UpdateTenantRequest:
    properties:
      is_active:
        example: false
        type: boolean
      name:
        example: Acme Industries
        type: string
      slug:
        example: acme-ind
        type: string
    type: object
  handler.UpdateUserRequest:
    properties:
      email:
        example: jane.smith@acme.com
        type: string
      full_name:
        example: Jane Smith
        type: string
      is_active:
        example: true
        type: boolean
      role:
        allOf:
        - $ref: '#/definitions/domain.UserRole'
        example: manager
    type: object
  handler.ValidationResponse:
    properties:
      document_id:
        example: 880e8400-e29b-41d4-a716-446655440003
        type: string
      field_statuses:
        additionalProperties:
          $ref: '#/definitions/handler.FieldStatus'
        type: object
      reconciliation_status:
        example: valid
        type: string
      reconciliation_summary:
        $ref: '#/definitions/handler.ValidationSummary'
      results:
        items:
          $ref: '#/definitions/handler.ValidationResultEntry'
        type: array
      summary:
        $ref: '#/definitions/handler.ValidationSummary'
      validation_status:
        example: warning
        type: string
    type: object
  handler.ValidationResultEntry:
    properties:
      actual_value:
        example: INV-2024-001234
        type: string
      expected_value:
        example: non-empty value
        type: string
      field_path:
        example: invoice.invoice_number
        type: string
      message:
        example: 'Required: Invoice Number: invoice.invoice_number is present'
        type: string
      passed:
        example: true
        type: boolean
      reconciliation_critical:
        example: true
        type: boolean
      rule_name:
        example: 'Required: Invoice Number'
        type: string
      rule_type:
        example: required_field
        type: string
      severity:
        example: error
        type: string
    type: object
  handler.ValidationSummary:
    properties:
      errors:
        example: 0
        type: integer
      passed:
        example: 48
        type: integer
      total:
        example: 50
        type: integer
      warnings:
        example: 2
        type: integer
    type: object
host: localhost:8080
info:
  contact:
    email: support@satvos.io
    name: API Support
  description: Multi-tenant document processing service with AI-powered invoice parsing
    and GST validation.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: SATVOS API
  version: "1.0"
paths:
  /admin/tenants:
    get:
      description: List all tenants (admin only)
      parameters:
      - default: 0
        description: Offset for pagination
        in: query
        name: offset
        type: integer
      - default: 20
        description: Limit for pagination (max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of tenants
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.Tenant'
                  type: array
                meta:
                  $ref: '#/definitions/handler.PagMeta'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden - admin only
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: List tenants
      tags:
      - tenants
    post:
      consumes:
      - application/json
      description: Create a new tenant (admin only)
      parameters:
      - description: Tenant details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreateTenantRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Tenant created
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Tenant'
              type: object
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden - admin only
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "409":
          description: Slug already exists
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Create a tenant
      tags:
      - tenants
  /admin/tenants/{id}:
    delete:
      description: Delete a tenant (admin only)
      parameters:
      - description: Tenant ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tenant deleted
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.MessageResponse'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden - admin only
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Tenant not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Delete a tenant
      tags:
      - tenants
    get:
      description: Get tenant details (admin only)
      parameters:
      - description: Tenant ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tenant details
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Tenant'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden - admin only
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Tenant not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Get tenant by ID
      tags:
      - tenants
    put:
      consumes:
      - application/json
      description: Update tenant details (admin only)
      parameters:
      - description: Tenant ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Fields to update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateTenantRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Tenant updated
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Tenant'
              type: object
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden - admin only
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Tenant not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Update a tenant
      tags:
      - tenants
  /auth/login:
    post:
      consumes:
      - application/json
      description: Authenticate with tenant slug, email and password to receive JWT
        tokens
      parameters:
      - description: Login credentials
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully authenticated
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.TokenResponse'
              type: object
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Invalid credentials
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Tenant or user inactive
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      summary: Login to get access token
      tags:
      - auth
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: Exchange a refresh token for a new access token pair
      parameters:
      - description: Refresh token
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.RefreshRequest'
      produces:
      - application/json
      responses:
        "200":
          description: New token pair
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.TokenResponse'
              type: object
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Invalid or expired refresh token
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      summary: Refresh access token
      tags:
      - auth
  /collections:
    get:
      description: List collections the user has access to
      parameters:
      - default: 0
        description: Offset for pagination
        in: query
        name: offset
        type: integer
      - default: 20
        description: Limit for pagination (max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of collections
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.Collection'
                  type: array
                meta:
                  $ref: '#/definitions/handler.PagMeta'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: List collections
      tags:
      - collections
    post:
      consumes:
      - application/json
      description: Create a new collection for grouping files
      parameters:
      - description: Collection details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreateCollectionRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Collection created
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Collection'
              type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient role
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Create a collection
      tags:
      - collections
  /collections/{id}:
    delete:
      description: Delete a collection (requires owner permission or admin role).
        Files are preserved.
      parameters:
      - description: Collection ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Collection deleted
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.MessageResponse'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Collection not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Delete a collection
      tags:
      - collections
    get:
      description: Get collection details with paginated files
      parameters:
      - description: Collection ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - default: 0
        description: Offset for files pagination
        in: query
        name: offset
        type: integer
      - default: 20
        description: Limit for files pagination (max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Collection with files
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.CollectionWithFiles'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Collection not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Get collection by ID
      tags:
      - collections
    put:
      consumes:
      - application/json
      description: Update collection metadata (requires editor+ permission)
      parameters:
      - description: Collection ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Updated collection details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateCollectionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Collection updated
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Collection'
              type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Collection not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Update a collection
      tags:
      - collections
  /collections/{id}/files:
    post:
      consumes:
      - multipart/form-data
      description: Upload multiple files to a collection. Returns 201 if all succeed,
        207 on partial success.
      parameters:
      - description: Collection ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Files to upload (multiple)
        in: formData
        name: files
        required: true
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: All files uploaded successfully
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/handler.BatchUploadResult'
                  type: array
              type: object
        "207":
          description: Partial success
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/handler.BatchUploadResult'
                  type: array
              type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Collection not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Batch upload files to a collection
      tags:
      - collections
  /collections/{id}/files/{fileId}:
    delete:
      description: Remove file association from collection (file itself is not deleted)
      parameters:
      - description: Collection ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: File ID (UUID)
        in: path
        name: fileId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: File removed from collection
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.MessageResponse'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Collection or file not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Remove a file from a collection
      tags:
      - collections
  /collections/{id}/permissions:
    get:
      description: List all permission entries for a collection (requires owner permission)
      parameters:
      - description: Collection ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - default: 0
        description: Offset for pagination
        in: query
        name: offset
        type: integer
      - default: 20
        description: Limit for pagination (max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of permissions
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.CollectionPermissionEntry'
                  type: array
                meta:
                  $ref: '#/definitions/handler.PagMeta'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Collection not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: List collection permissions
      tags:
      - collections
    post:
      consumes:
      - application/json
      description: Grant or update a user's permission on a collection (requires owner
        permission)
      parameters:
      - description: Collection ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Permission details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.SetPermissionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Permission set
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.MessageResponse'
              type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Collection not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Set user permission on a collection
      tags:
      - collections
  /collections/{id}/permissions/{userId}:
    delete:
      description: Remove a user's permission from a collection (requires owner permission,
        cannot remove self)
      parameters:
      - description: Collection ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: User ID (UUID)
        in: path
        name: userId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Permission removed
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.MessageResponse'
              type: object
        "400":
          description: Invalid ID or self-removal attempt
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Collection not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Remove user permission from a collection
      tags:
      - collections
  /documents:
    get:
      description: List documents with optional collection filter
      parameters:
      - default: 0
        description: Offset for pagination
        in: query
        name: offset
        type: integer
      - default: 20
        description: Limit for pagination (max 100)
        in: query
        name: limit
        type: integer
      - description: Filter by collection ID
        in: query
        name: collection_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of documents
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.Document'
                  type: array
                meta:
                  $ref: '#/definitions/handler.PagMeta'
              type: object
        "400":
          description: Invalid collection_id
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: List documents
      tags:
      - documents
    post:
      consumes:
      - application/json
      description: Create a document from an uploaded file and trigger AI parsing
      parameters:
      - description: Document creation details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreateDocumentRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Document created, parsing started
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Document'
              type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: File or collection not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "409":
          description: Document already exists for this file
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Create a document
      tags:
      - documents
  /documents/{id}:
    delete:
      description: Delete a document (admin only)
      parameters:
      - description: Document ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Document deleted
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.MessageResponse'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden - admin only
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Document not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Delete a document
      tags:
      - documents
    get:
      description: Get document details including parsed data and validation status
      parameters:
      - description: Document ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Document details
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Document'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Document not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Get document by ID
      tags:
      - documents
  /documents/{id}/retry:
    post:
      description: Re-trigger AI parsing for a failed document
      parameters:
      - description: Document ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Parsing re-triggered
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Document'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Document not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Retry document parsing
      tags:
      - documents
  /documents/{id}/review:
    put:
      consumes:
      - application/json
      description: Approve or reject a parsed document
      parameters:
      - description: Document ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Review decision
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.ReviewDocumentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Document reviewed
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Document'
              type: object
        "400":
          description: Invalid request or document not parsed
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Document not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Review a document
      tags:
      - documents
  /documents/{id}/structured-data:
    put:
      consumes:
      - application/json
      description: Manually edit the parsed structured data of a document, re-run
        validation and auto-tag extraction
      parameters:
      - description: Document ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Structured data (GSTInvoice)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.EditStructuredDataRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Document updated with new structured data
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Document'
              type: object
        "400":
          description: Invalid request, document not parsed, or invalid structured
            data
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Document not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Edit structured data
      tags:
      - documents
  /documents/{id}/tags:
    get:
      description: List all tags (user and auto-generated) for a document
      parameters:
      - description: Document ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of tags
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.DocumentTag'
                  type: array
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Document not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: List document tags
      tags:
      - documents
    post:
      consumes:
      - application/json
      description: Add user tags to a document (requires editor+ permission)
      parameters:
      - description: Document ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Tags to add
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.AddTagsRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Tags added
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.DocumentTag'
                  type: array
              type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Document not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Add tags to a document
      tags:
      - documents
  /documents/{id}/tags/{tagId}:
    delete:
      description: Delete a user tag from a document (requires editor+ permission)
      parameters:
      - description: Document ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Tag ID (UUID)
        in: path
        name: tagId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tag deleted
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.MessageResponse'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Insufficient permission
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Document or tag not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Delete a tag
      tags:
      - documents
  /documents/{id}/validate:
    post:
      description: Re-run the validation engine on a parsed document
      parameters:
      - description: Document ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Validation completed
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.MessageResponse'
              type: object
        "400":
          description: Invalid ID or document not parsed
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Document not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Re-run validation
      tags:
      - documents
  /documents/{id}/validation:
    get:
      description: Get detailed validation results including per-rule and per-field
        status
      parameters:
      - description: Document ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Validation results
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.ValidationResponse'
              type: object
        "400":
          description: Invalid ID or document not parsed
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: Document not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Get validation results
      tags:
      - documents
  /documents/search/tags:
    get:
      description: Search for documents with a specific tag key-value pair
      parameters:
      - description: Tag key
        in: query
        name: key
        required: true
        type: string
      - description: Tag value
        in: query
        name: value
        required: true
        type: string
      - default: 0
        description: Offset for pagination
        in: query
        name: offset
        type: integer
      - default: 20
        description: Limit for pagination (max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Matching documents
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.Document'
                  type: array
                meta:
                  $ref: '#/definitions/handler.PagMeta'
              type: object
        "400":
          description: Missing key or value
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Search documents by tag
      tags:
      - documents
  /files:
    get:
      description: List all files for the tenant with pagination
      parameters:
      - default: 0
        description: Offset for pagination
        in: query
        name: offset
        type: integer
      - default: 20
        description: Limit for pagination (max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of files
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.FileMeta'
                  type: array
                meta:
                  $ref: '#/definitions/handler.PagMeta'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: List files
      tags:
      - files
  /files/{id}:
    delete:
      description: Delete a file (admin only)
      parameters:
      - description: File ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: File deleted
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.MessageResponse'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden - admin only
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: File not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Delete a file
      tags:
      - files
    get:
      description: Get file metadata and a presigned download URL
      parameters:
      - description: File ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: File metadata with download URL
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.FileWithDownloadURL'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: File not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Get file by ID
      tags:
      - files
  /files/upload:
    post:
      consumes:
      - multipart/form-data
      description: Upload a file (PDF, JPG, PNG, max 50MB) with optional collection
        association
      parameters:
      - description: File to upload (PDF, JPG, or PNG)
        in: formData
        name: file
        required: true
        type: file
      - description: Collection ID to add file to
        in: formData
        name: collection_id
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: File uploaded successfully
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.FileMeta'
              type: object
        "400":
          description: Missing file or unsupported type
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "413":
          description: File too large
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "500":
          description: Upload failed
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Upload a file
      tags:
      - files
  /healthz:
    get:
      description: Check if the service is alive
      produces:
      - application/json
      responses:
        "200":
          description: Service is alive
          schema:
            $ref: '#/definitions/handler.HealthResponse'
      summary: Liveness probe
      tags:
      - health
  /readyz:
    get:
      description: Check if the service is ready to accept traffic (checks database
        connection)
      produces:
      - application/json
      responses:
        "200":
          description: Service is ready
          schema:
            $ref: '#/definitions/handler.HealthResponse'
        "503":
          description: Service is not ready
          schema:
            $ref: '#/definitions/handler.HealthResponse'
      summary: Readiness probe
      tags:
      - health
  /users:
    get:
      description: List all users in the tenant (admin only)
      parameters:
      - default: 0
        description: Offset for pagination
        in: query
        name: offset
        type: integer
      - default: 20
        description: Limit for pagination (max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of users
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.User'
                  type: array
                meta:
                  $ref: '#/definitions/handler.PagMeta'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden - admin only
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: List users
      tags:
      - users
    post:
      consumes:
      - application/json
      description: Create a new user in the tenant (admin only)
      parameters:
      - description: User details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreateUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: User created
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.User'
              type: object
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden - admin only
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "409":
          description: Email already exists
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Create a user
      tags:
      - users
  /users/{id}:
    delete:
      description: Delete a user from the tenant (admin only)
      parameters:
      - description: User ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User deleted
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.MessageResponse'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden - admin only
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Delete a user
      tags:
      - users
    get:
      description: Get user details (self or admin access)
      parameters:
      - description: User ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User details
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.User'
              type: object
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Get user by ID
      tags:
      - users
    put:
      consumes:
      - application/json
      description: Update user details (self can update name/email, admin can update
        role/active status)
      parameters:
      - description: User ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Fields to update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: User updated
          schema:
            allOf:
            - $ref: '#/definitions/handler.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.User'
              type: object
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/handler.ErrorResponseBody'
      security:
      - BearerAuth: []
      summary: Update a user
      tags:
      - users
securityDefinitions:
  BearerAuth:
    description: 'Type "Bearer" followed by a space and the JWT token. Example: Bearer
      eyJhbGci...'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
