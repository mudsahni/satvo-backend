meta {
  name: Create Document (Dual Parse)
  type: http
  seq: 9
}

post {
  url: {{baseUrl}}/api/v1/documents
  body: json
  auth: bearer
}

auth:bearer {
  token: {{accessToken}}
}

body:json {
  {
    "file_id": "{{fileId}}",
    "collection_id": "{{collectionId}}",
    "document_type": "invoice",
    "parse_mode": "dual",
    "name": "My Invoice (Dual)",
    "tags": {
      "vendor": "Acme Corp"
    }
  }
}

script:post-response {
  if (res.status === 201 && res.body.data && res.body.data.id) {
    bru.setVar("documentId", res.body.data.id);
  }
}
